# Flappy Bat 3D

<div align="center">
  <a href="https://nalbam.github.io/games/flappy-bat-three/">
    <img src="./images/game.png" alt="Flappy Bat 3D Logo" width="300">
  </a>
  <br>
  <a href="https://nalbam.github.io/games/flappy-bat-three/">ğŸ® ê²Œì„ í”Œë ˆì´</a>
</div>

Three.jsë¡œ êµ¬í˜„ëœ 3D í”Œë˜í”¼ ë°°íŠ¸ ê²Œì„ì…ë‹ˆë‹¤.

*Claude Code - AI ì½”ë”© ì–´ì‹œìŠ¤í„´íŠ¸ë¡œ ì œì‘*

## ê²Œì„ ê°œìš”

- **ì¥ë¥´**: 3D íš¡ìŠ¤í¬ë¡¤ ì•„ì¼€ì´ë“œ ê²Œì„
- **ìºë¦­í„°**: ë‚ ê°œë¥¼ í„ëŸ­ì´ëŠ” 3D ë°•ì¥
- **ì¡°ì‘ë²•**: í´ë¦­/í„°ì¹˜/ìŠ¤í˜ì´ìŠ¤ë°” â†’ ë‚ ê°œ í„ëŸ­ì´ê¸° (ìœ„ë¡œ ë‚ ê¸°)
- **ë¬¼ë¦¬ ì—”ì§„**: í˜„ì‹¤ì ì¸ ì¤‘ë ¥ê³¼ ê´€ì„± ê¸°ë°˜ ë¹„í–‰
- **ì¥ì• ë¬¼**: 3D ì›í†µí˜• íŒŒì´í”„ ì¥ì• ë¬¼
- **í™˜ê²½**: 3D ë™êµ´ í™˜ê²½ê³¼ ì•ˆê°œ íš¨ê³¼
- **íŠ¹ë³„ ê¸°ëŠ¥**: 3D ëª¨ë¸ë§ê³¼ ê·¸ë¦¼ì íš¨ê³¼
- **ì„±ëŠ¥**: ëª¨ë“  í”Œë«í¼ì—ì„œ ë¶€ë“œëŸ¬ìš´ 60 FPS

## ê²Œì„ í”Œë ˆì´ ë°©ë²•

### ğŸ® ì¡°ì‘ë²•
- **ë°ìŠ¤í¬í†±**: ìŠ¤í˜ì´ìŠ¤ë°” ë˜ëŠ” í´ë¦­ìœ¼ë¡œ ë‚ ê°œ í„ëŸ­ì´ê¸°
- **ëª¨ë°”ì¼**: í™”ë©´ í„°ì¹˜ë¡œ ë‚ ê°œ í„ëŸ­ì´ê¸°
- **ì¬ì‹œì‘**: ê²Œì„ ì˜¤ë²„ í›„ í´ë¦­/í„°ì¹˜ë¡œ ì¬ì‹œì‘

### ğŸ¯ ê²Œì„í”Œë ˆì´
1. **ê²Œì„ ì‹œì‘**: ìŠ¤í˜ì´ìŠ¤ë°”, í´ë¦­ ë˜ëŠ” í„°ì¹˜ë¡œ ê²Œì„ ì‹œì‘
2. **ë°•ì¥ ì¡°ì‘**:
   - ìŠ¤í˜ì´ìŠ¤ë°”, í´ë¦­ ë˜ëŠ” í„°ì¹˜ë¡œ ë‚ ê°œë¥¼ í„ëŸ­ì—¬ ìœ„ë¡œ ë‚ ê¸°
   - ë†“ìœ¼ë©´ ì¤‘ë ¥ì— ì˜í•´ ì•„ë˜ë¡œ ë–¨ì–´ì§
3. **ì¥ì• ë¬¼ í”¼í•˜ê¸°**: 3D íŒŒì´í”„ ì‚¬ì´ì˜ í‹ˆì„ í†µê³¼í•˜ë©° ë‚ ì•„ê°€ê¸°
4. **ì ìˆ˜ íšë“**: ê° ì¥ì• ë¬¼ì„ í†µê³¼í•  ë•Œë§ˆë‹¤ ì ìˆ˜ ì¦ê°€
5. **ê²Œì„ ì˜¤ë²„**: íŒŒì´í”„, ì²œì¥, ë°”ë‹¥ê³¼ ì¶©ëŒí•˜ë©´ ê²Œì„ ì¢…ë£Œ
6. **ì¬ì‹œì‘**: ê²Œì„ ì˜¤ë²„ í›„ í´ë¦­í•˜ì—¬ ë‹¤ì‹œ ì‹œì‘

### ğŸ“± ëª¨ë°”ì¼ ìµœì í™”
- ëª¨ë“  ê¸°ê¸°ì—ì„œ ì‘ë™í•˜ëŠ” ë°˜ì‘í˜• ë””ìì¸
- ìŠ¤ë§ˆíŠ¸í°ê³¼ íƒœë¸”ë¦¿ì„ ìœ„í•œ í„°ì¹˜ ì¡°ì‘
- iOSì™€ Androidì— ìµœì í™”ëœ ì„±ëŠ¥
- ì „ì²´ í™”ë©´ ê²Œì„í”Œë ˆì´ ê²½í—˜

## ê²Œì„ íŠ¹ì§•

### ğŸ® í•µì‹¬ ê²Œì„í”Œë ˆì´
- **ì „ì²´ í™”ë©´ ë””ìŠ¤í”Œë ˆì´**: ë¸Œë¼ìš°ì € ì°½ì„ ê°€ë“ ì±„ìš°ëŠ” ë°˜ì‘í˜• ë””ìì¸
- **í¬ë¡œìŠ¤ í”Œë«í¼ ì„±ëŠ¥**: Windows, Mac, iOS, Androidì—ì„œ 60 FPS ê³ ì •
- **ê³ ê¸‰ 3D ë¬¼ë¦¬**: Three.js ê¸°ë°˜ ì¤‘ë ¥, ê´€ì„±, 3D ì¶©ëŒ ê°ì§€
- **3D ë°•ì¥ ëª¨ë¸**: ë‚ ê°œì™€ ëª¸ì²´ë¥¼ ê°€ì§„ 3D ë°•ì¥ ìºë¦­í„°
- **ë™ì  3D í™˜ê²½**: ì•ˆê°œ íš¨ê³¼ì™€ ì¡°ëª…ì´ ìˆëŠ” 3D ë™êµ´

### ğŸ¨ ì‹œê°ì  & ì˜¤ë””ì˜¤ íš¨ê³¼
- **3D ì• ë‹ˆë©”ì´ì…˜**: ì‹¤ì‹œê°„ ë‚ ê°œ í„ëŸ­ì„ ì• ë‹ˆë©”ì´ì…˜
- **3D ì¥ì• ë¬¼**: ì›í†µí˜• íŒŒì´í”„ì™€ ìº¡ì´ ìˆëŠ” 3D ì¥ì• ë¬¼
- **ê·¸ë¦¼ì íš¨ê³¼**: ì‹¤ì‹œê°„ ê·¸ë¦¼ì ë§¤í•‘ê³¼ ì¡°ëª… íš¨ê³¼
- **ëª°ì…í˜• ì˜¤ë””ì˜¤**: ë‚ ê°œ ì†Œë¦¬, ì¶©ëŒìŒ, íš¨ê³¼ìŒ
- **ì¹´ë©”ë¼ ì¶”ì **: ë°•ì¥ë¥¼ ë”°ë¼ê°€ëŠ” ë¶€ë“œëŸ¬ìš´ ì¹´ë©”ë¼ ì›€ì§ì„
- **ë°˜ì‘í˜• UI**: ì ìˆ˜ í‘œì‹œì™€ ê²Œì„ ìƒíƒœ ì¸í„°í˜ì´ìŠ¤

### ğŸ› ï¸ ê¸°ìˆ ì  íŠ¹ì§•
- **Three.js ì—”ì§„**: ìµœì‹  WebGL ê¸°ë°˜ 3D ë Œë”ë§
- **ì‹¤ì‹œê°„ 3D ë Œë”ë§**: 60 FPS 3D ê·¸ë˜í”½
- **ì •ë°€í•œ 3D ì¶©ëŒ**: 3D ë°”ìš´ë”© ë°•ìŠ¤ ì¶©ëŒ ê°ì§€
- **ëª¨ë°”ì¼ ìµœì í™”**: iOSì™€ Androidë¥¼ ìœ„í•œ ì„±ëŠ¥ íŠœë‹
- **ì˜¤ë””ì˜¤ ì‹œìŠ¤í…œ**: ì„±ëŠ¥ ìµœì í™”ëœ ì‚¬ìš´ë“œ ì‹œìŠ¤í…œ
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: íš¨ìœ¨ì ì¸ 3D ê°ì²´ ê´€ë¦¬ì™€ ì •ë¦¬

## ê²Œì„ ì—ì…‹

### ì´ë¯¸ì§€
- **ë°•ì¥ ìŠ¤í”„ë¼ì´íŠ¸**:
  - [bat1.png](./images/bat1.png) - ë‚ ê°œ í¼ì¹œ ìƒíƒœ (300x223) - í™œê³µ/ë‚™í•˜
  - [bat2.png](./images/bat2.png) - ë‚ ê°œ ì ‘ì€ ìƒíƒœ (300x223) - ì í”„/í„ëŸ­ì„
  - [bat_dead.png](./images/bat_dead.png) - ì£½ì€ ìƒíƒœ (300x317) - ê²Œì„ ì˜¤ë²„
  - [bat_fever.png](./images/bat_fever.png) - í”¼ë²„ ëª¨ë“œ (400x353) - íŒŒì›Œì—… ìƒíƒœ
- **íŒŒì›Œì—… ì•„ì´í…œ**:
  - [torch.png](./images/torch.png) - í”¼ë²„ ëª¨ë“œ íŠ¸ë¦¬ê±° (170x300)
- **í™˜ê²½**:
  - [rock.png](./images/rock.png) - íŒŒê´´ ê°€ëŠ¥í•œ ë°”ìœ„ í…ìŠ¤ì²˜ (300x286)
  - [game.png](./images/game.png) - ê²Œì„ ë¡œê³  (1024x1024)

### ì‚¬ìš´ë“œ íš¨ê³¼
- **ë‚ ê°œ ì†Œë¦¬**: [Bat_takeoff.ogg](./sounds/Bat_takeoff.ogg) - ì í”„/í„ëŸ­ì„ ì†Œë¦¬
- **íŒŒì›Œì—… ì‚¬ìš´ë“œ**: Bat_idle1-4.ogg (4ê°€ì§€ ë³€í˜•) - í† ì¹˜ ìˆ˜ì§‘ ë° ê²Œì„ ì‹œì‘
- **ì¶©ëŒ ì‚¬ìš´ë“œ**: Bat_hurt1-3.ogg (3ê°€ì§€ ë³€í˜•) - ë°”ìœ„ ì¶©ëŒ í”¼í•´
- **íŒŒê´´ íš¨ê³¼**: Explosion1-4.ogg (4ê°€ì§€ ë³€í˜•) - ë°”ìœ„ íŒŒê´´ ì†Œë¦¬

## ì†ŒìŠ¤ ì½”ë“œ

- **ê²Œì„ ë¡œì§**: [game.js](./game.js) - Three.js ê¸°ë°˜ 3D ê²Œì„ ì—”ì§„ê³¼ ë¬¼ë¦¬, ì¶©ëŒ ê°ì§€, ë Œë”ë§
- **HTML í˜ì´ì§€**: [index.html](./index.html) - ëª¨ë°”ì¼ ìµœì í™”ëœ ë°˜ì‘í˜• ì›¹ í˜ì´ì§€

## ì‹¤í–‰ ë°©ë²•

### ğŸŒ ì˜¨ë¼ì¸ìœ¼ë¡œ í”Œë ˆì´
ë°©ë¬¸: **https://nalbam.github.io/games/flappy-bat-three/**

### ğŸ’» ë¡œì»¬ì—ì„œ ì‹¤í–‰
1. ì´ ì €ì¥ì†Œë¥¼ í´ë¡ í•˜ì„¸ìš”
2. ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ `docs/flappy-bat-three/index.html`ë¥¼ ì—´ì–´ì£¼ì„¸ìš”
3. ìŠ¤í˜ì´ìŠ¤ë°”, í´ë¦­ ë˜ëŠ” í„°ì¹˜ë¡œ ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”
4. ê²Œì„ì„ ì¦ê¸°ì„¸ìš”!

## ê²Œì„ ë©”ì»¤ë‹ˆì¦˜

### ê¸°ë³¸ 3D ë¬¼ë¦¬
- **í™”ë©´ í¬ê¸°**: ì „ì²´ í™”ë©´ (ë°˜ì‘í˜• 3D ë·°í¬íŠ¸)
- **ë°•ì¥ 3D ëª¨ë¸**:
  - ëª¸ì²´: 0.3 x 0.2 x 0.1 ë‹¨ìœ„ (3D ë°•ìŠ¤)
  - ë‚ ê°œ: 0.15 x 0.05 x 0.3 ë‹¨ìœ„ (ì¢Œìš° ê°ê°)
- **ì í”„ë ¥**: 0.04 ì†ë„ ë‹¨ìœ„
- **ì¤‘ë ¥**: -0.002 ê°€ì†ë„ (í”„ë ˆì„ë‹¹)
- **ê²Œì„ ì†ë„**: 0.02 ë‹¨ìœ„ (í”„ë ˆì„ë‹¹)
- **íŒŒì´í”„ ê·œê²©**:
  - ë°˜ì§€ë¦„: 0.3 ë‹¨ìœ„
  - ë†’ì´: 5 ë‹¨ìœ„
  - ê°„ê²©: 4 ë‹¨ìœ„ (íŒŒì´í”„ ì‚¬ì´)
  - ìƒì„± ê°„ê²©: 2 ë‹¨ìœ„ ê°­
- **3D ê²½ê³„**: ìœ„ì•„ë˜ 4 ë‹¨ìœ„ ì œí•œ

### Fever Mode Mechanics
- **Activation**: Collect torch (spawns every 10 obstacles)
- **Torch Size**: 51x90 pixels (170x300 source ratio)
- **Duration**: 300 frames (5 seconds at 60 FPS)
- **Effects**: Giant size, 4x speed, invincibility to rocks
- **Visual Timer**: Real-time countdown bar display

### Animation System
- **Normal Mode Animations**:
  - Jump: Wings spread (bat1) â†’ Wings folded (bat2)
  - Falling: Wings spread for gliding
  - Idle: Natural wing flapping cycle (20 frames)
  - Rapid Input: Faster wing animation on consecutive jumps
  - Timing: 12 frames (normal), 8 frames (rapid)
- **Fever Mode**: Giant bat_fever sprite with enhanced visual effects
- **Death Animation**: bat_dead sprite with rotation effects

### Collision & Destruction
- **Collision Detection**: Precise collision matching visual boundaries
- **Rock Destruction**: Individual 90-pixel rock pieces with realistic physics
- **Normal Mode**: Collision with rocks causes game over + rock destruction
- **Fever Mode**: Collision destroys rocks but bat continues (invincible)
- **Rock Physics**:
  - Top rocks: Fall and scatter on collision
  - Bottom rocks: Tip over in collision direction
  - Ground settling: Pieces settle on cave floor (60px from bottom)
  - Friction: 0.7 coefficient when pieces hit ground
  - Rotation: Individual piece rotation with momentum

### Audio System
- **Wing Flap**: Plays on every jump input (SPACEBAR/Click/Touch)
- **Game Start**: Random idle sound after countdown
- **Normal Collision**: Simultaneous hurt + explosion sounds (game over)
- **Fever Collision**: Explosion sound only (no hurt sound, continues playing)
- **Torch Collection**: Random idle sound for power-up feedback
- **Performance**: 50ms throttling to prevent audio overlap on mobile
- **Volume**: All sounds at 50% with mobile optimization

## Code Architecture

### Core Systems
- **Game Loop**: 60 FPS fixed frame rate with requestAnimationFrame
- **Physics Engine**: Gravity (1.0), jump velocity (-16), rock physics (0.3 gravity)
- **Collision Detection**: Precise bounding box collision with margin adjustments
- **Animation System**: State-based sprite animation with timing controls
- **Audio Engine**: Performance-optimized sound system with throttling (50ms)

### Key Components
- **Bat Object**: Position, velocity, animation states, fever mode properties
- **Rock System**: Dynamic obstacle generation with destructible physics
- **Torch System**: Power-up spawning every 10 obstacles at random positions
- **Particle System**: Rock destruction with individual piece physics
- **Mobile Optimization**: Responsive canvas scaling and touch controls

### Technical Implementation
- **Canvas Rendering**: High-resolution (1600x1200) with device pixel ratio scaling
- **Asset Management**: Progressive image loading with loading screen
- **Input Handling**: Cross-platform (keyboard, mouse, touch) event management
- **State Management**: Game states (start, countdown, playing, game over)
- **Performance**: Mobile-optimized rendering and audio throttling

## Development

This game was developed using **Claude Code**, an AI-powered coding assistant that helped with:
- Game logic implementation and architecture design
- Advanced physics and collision detection systems
- Dynamic rock destruction with realistic particle physics
- Multi-state bat animation system with timing controls
- High-resolution canvas rendering and mobile optimization
- Cross-platform audio system with performance throttling
- Responsive design and touch input handling
- Fever mode power-up system with visual feedback
- Asset loading pipeline and error handling mechanisms
- Code optimization and performance tuning for mobile devices

## Technical Features

### Rock Physics Engine
- Individual rock pieces with unique physics properties
- Realistic gravity, rotation, and collision mechanics
- Dynamic destruction based on collision direction
- Ground friction and settling behavior

### Sound System
- Multiple audio file format support (.ogg)
- Random sound selection for variety
- Audio error handling and fallback
- Optimized audio loading and playback

### Visual Effects
- Real-time rock breaking animation
- Dynamic bat wing animations
- Smooth 60 FPS rendering
- Asset loading screen with progress indicator
- Debug mode for collision visualization
- Responsive canvas scaling

### Recent Updates

#### Version 2.0 - Fever Mode Update
- **ğŸ”¥ Fever Mode System**: Complete power-up system with torch collection
  - Giant bat transformation (2x size, 4x speed)
  - Invincibility to rock collisions with destruction effects
  - Visual timer bar and "FEVER MODE!" display
  - 5-second duration with real-time countdown
- **ğŸ¨ New Visual Assets**:
  - bat_fever.png (400x353) - Giant fever mode sprite
  - bat_dead.png (300x317) - Renamed from batx with proper scaling
  - torch.png (170x300) - Power-up collectible item
- **âš¡ Enhanced Performance**:
  - 60 FPS locked frame rate across all platforms (Windows, Mac, iOS, Android)
  - Advanced audio throttling system (50ms) for mobile optimization
  - Improved collision detection with dynamic bat sizing
- **ğŸ® UI Improvements**:
  - Restart button with click/touch detection
  - Fever mode timer bar and status display
  - Enhanced game over screen with better UX
- **ğŸ”§ Technical Enhancements**:
  - High-resolution rendering (1600x1200 internal resolution)
  - Cross-platform input handling (keyboard, mouse, touch)
  - Memory-optimized asset management
  - Responsive canvas scaling for all devices

#### Previous Updates
- **Bat Animation System**: Dynamic wing animations with accurate aspect ratios
- **Physics Engine**: Realistic rock destruction with individual piece physics
- **Audio System**: Immersive sound effects with mobile optimization
- **í¬ë¡œìŠ¤ í”Œë«í¼ ì§€ì›**: ì„±ëŠ¥ ìµœì í™”ë¥¼ í†µí•œ ë²”ìš© í˜¸í™˜ì„±
